# Backend Environment Configuration
# Copy this file to .env and update with your values

# ===== Application Settings =====
APP_NAME="Event Scraper API"
APP_VERSION="1.0.0"
DEBUG=false
LOG_LEVEL=INFO

# ===== Server Configuration =====
HOST=0.0.0.0
PORT=8000
RELOAD=false

# ===== CORS Settings =====
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173,http://localhost:3000,http://127.0.0.1:3000

# ===== Ollama Configuration =====
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=gemma3:1b               # Fast model (gemma3:1b ~10s/article, llama3.1:8b ~5min/article)
OLLAMA_TIMEOUT=60                    # Timeout per individual LLM call in seconds (default: 60)
OLLAMA_TOTAL_TIMEOUT=300             # Total timeout for all LLM processing in seconds (5 minutes, default: 300)

# ===== Scraping Limits (Global Defaults) =====
# These can be overridden per-source in config/sources.yaml
MAX_SEARCH_RESULTS=10                # Maximum URL results to extract from search page (default: 10)
MAX_ARTICLES_TO_PROCESS=5            # Maximum articles to scrape and process with LLM (default: 5)

# ===== Sources Configuration =====
SOURCES_CONFIG_PATH=../config/sources.yaml

# ===== Scraping Settings =====
SCRAPER_TIMEOUT=30
SCRAPER_MAX_RETRIES=3
SCRAPER_RETRY_DELAY=2
SCRAPER_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36
SCRAPER_RESPECT_ROBOTS=false          # Set to true to respect robots.txt (default: false for internal research use)

# ===== Rate Limiting =====
RATE_LIMIT_REQUESTS=10
RATE_LIMIT_PERIOD=60
RATE_LIMIT_PER_DOMAIN=true

# ===== Session Management =====
SESSION_TIMEOUT=3600
SESSION_MAX_SIZE=100

# ===== Logging =====
LOG_DIR=logs
LOG_FILE=app.log
LOG_ROTATION=10 MB
LOG_RETENTION=30 days
LOG_FORMAT=<green>{time:YYYY-MM-DD HH:mm:ss}</green> | <level>{level: <8}</level> | <cyan>{name}</cyan>:<cyan>{function}</cyan>:<cyan>{line}</cyan> - <level>{message}</level>

# ===== Security =====
# Set to true in production to enable security headers
ENABLE_SECURITY_HEADERS=false
# API Key for protected endpoints (optional)
API_KEY=

# ===== Performance =====
# Maximum concurrent scraping tasks
MAX_CONCURRENT_SCRAPES=5
# Maximum events per search
MAX_EVENTS_PER_SEARCH=100

# ===== NLP Settings =====
SPACY_MODEL=en_core_web_sm
NER_CONFIDENCE_THRESHOLD=0.5

# ===== Query Matching Weights =====
WEIGHT_TEXT=0.4
WEIGHT_LOCATION=0.25
WEIGHT_DATE=0.2
WEIGHT_EVENT_TYPE=0.15

# ===== Export Settings =====
EXPORT_MAX_ROWS=1000
EXPORT_TEMP_DIR=temp

# ===== Database (Future) =====
# DATABASE_URL=postgresql://user:password@localhost/eventdb
# DATABASE_POOL_SIZE=5
# DATABASE_MAX_OVERFLOW=10
